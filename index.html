<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portafolio | Certificaciones</title>
  <meta name="description" content="Acceso a mi PDF de certificaciones, a mi currículum y a mi perfil de Credly." />
  <meta name="color-scheme" content="dark light" />

  <!-- Fuente moderna -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Paleta base (modo oscuro por defecto) */
      --txt:#ffffff;
      --muted:#d1d5db;
      --accent:#FFB800;   /* amarillo */
      --accent-2:#3b2f57; /* violeta oscuro */
      --radius:18px;
      --shadow: 0 12px 40px rgba(0,0,0,.6);
      --panel: rgba(0,0,0,.65);

      --chip-bg: rgba(255,255,255,.06);
      --chip-bd: rgba(255,255,255,.12);

      --canvas-opacity: 0.35; /* opacidad de partículas en oscuro */
    }

    /* Modo CLARO automático */
    @media (prefers-color-scheme: light) {
      :root{
        --txt:#0b0b0b;
        --muted:#4a5568;
        --accent:#FFB800;
        --accent-2:#2f2960;      /* tono violeta más sobrio en claro */
        --panel: rgba(255,255,255,.82);
        --shadow: 0 12px 40px rgba(0,0,0,.18);

        --chip-bg: rgba(0,0,0,.04);
        --chip-bd: rgba(0,0,0,.10);

        --canvas-opacity: 0.18;  /* menos intrusivo en claro */
      }
    }

    *{box-sizing:border-box; margin:0; padding:0;}
    html,body{height:100%; font-family:'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;}

    /* Fondo (imagen) + canvas de partículas */
    body{
      background: url("assets/Foto de fondo.png") no-repeat center center fixed;
      background-size: cover;
      color:var(--txt);
      display:flex; align-items:center; justify-content:center;
      padding:20px;
      position: relative;
      overflow-x:hidden;
    }

    /* Canvas de partículas detrás */
    #bg-net{
      position: fixed;
      inset: 0;
      z-index: -1;
      opacity: var(--canvas-opacity);
      pointer-events: none;
    }

    /* Animación suave */
    @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
    @media (prefers-reduced-motion: reduce){ *{animation:none!important; transition:none!important} }

    .overlay{
      background:var(--panel);
      backdrop-filter: blur(6px);
      border:1px solid rgba(0,0,0,.06);
      border-radius:20px;
      padding:40px 28px;
      max-width: 980px;
      width:100%;
      box-shadow:var(--shadow);
      animation:fadeUp .45s ease-out both;
    }

    h1{font-size:clamp(28px,5vw,44px);line-height:1.1;letter-spacing:.2px;margin-bottom:8px;font-weight:800}
    p.lead{font-size:clamp(14px,2.4vw,18px);color:var(--muted);margin-bottom:26px;max-width:70ch}

    /* Botonera: auto-fit para responsive impecable */
    .btns{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(230px,1fr));
      gap:14px;
      margin-bottom:22px;
      animation:fadeUp .55s ease-out both .05s;
    }
    .btn{
      display:flex; align-items:center; justify-content:center; gap:10px;
      padding:16px; border-radius:14px; font-weight:700; text-decoration:none;
      transition:transform .18s ease, box-shadow .25s ease, filter .25s ease;
      box-shadow:0 8px 22px rgba(0,0,0,.35);
      will-change:transform, box-shadow, filter;
    }
    .btn svg{width:20px;height:20px}
    .btn.primary{background:var(--accent); color:#111}
    .btn.primary:hover{filter:brightness(1.08); transform:translateY(-2px); box-shadow:0 16px 38px rgba(255,184,0,.35)}
    .btn.secondary{background:var(--accent-2); color:#fff}
    .btn.secondary:hover{filter:brightness(1.08); transform:translateY(-2px); box-shadow:0 16px 38px rgba(59,47,87,.45)}
    .btn:focus-visible{outline:none; box-shadow:0 0 0 6px rgba(255,184,0,.28)}

    /* Visor PDF */
    .viewer{
      margin-top:6px;
      background:rgba(255,255,255,.04);
      border:1px solid var(--chip-bd);
      border-radius:16px;
      overflow:hidden;
      display:none; /* se muestra al elegir un PDF */
      animation:fadeUp .6s ease-out both .08s;
    }
    @media (prefers-color-scheme: light) {
      .viewer{ background: rgba(0,0,0,.04); }
    }
    .viewer-header{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
      padding:10px 12px; background:rgba(0,0,0,.12); border-bottom:1px solid var(--chip-bd)
    }
    @media (prefers-color-scheme: light) {
      .viewer-header{ background: rgba(255,255,255,.5); }
    }
    .viewer-title{font-weight:700}
    .viewer-actions{display:flex; gap:10px; flex-wrap:wrap}
    .tiny-btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:10px; text-decoration:none; font-weight:700;
      transition:filter .2s ease, transform .15s ease;
      box-shadow:0 6px 16px rgba(0,0,0,.25);
      background:var(--accent); color:#111;
    }
    .tiny-btn.secondary{background:transparent; color:var(--txt); border:1px solid var(--chip-bd)}
    .tiny-btn:hover{filter:brightness(1.06); transform:translateY(-1px)}
    .tiny-btn svg{width:18px; height:18px}

    iframe#pdfViewer{
      width:100%; height:70vh; min-height:420px; border:0; display:block; background:#111;
    }

    /* Chips con tooltips */
    .badges{
      display:grid; grid-template-columns: repeat(auto-fit, minmax(180px,1fr));
      gap:12px; margin-top:18px;
    }
    .badge{
      position: relative;
      display:flex; align-items:center; gap:10px;
      padding:12px 14px; border-radius:14px;
      background: var(--chip-bg);
      border:1px solid var(--chip-bd);
      color:var(--txt); font-weight:600; font-size:14px;
      transition:transform .18s ease, box-shadow .25s ease, background .25s ease;
    }
    .badge:hover{transform:translateY(-2px); box-shadow:0 10px 26px rgba(0,0,0,.25); }
    .badge svg{width:18px; height:18px; opacity:.95}

    /* Tooltip accesible (mouse + teclado) */
    .badge[data-tip]::after{
      content: attr(data-tip);
      position:absolute;
      left:50%; bottom: calc(100% + 10px);
      transform: translateX(-50%);
      max-width: 280px;
      padding:8px 10px;
      font-size:12px; font-weight:600; line-height:1.25;
      color:#0b0b0b;
      background:#fff;
      border:1px solid rgba(0,0,0,.12);
      border-radius:10px;
      box-shadow: 0 10px 24px rgba(0,0,0,.2);
      opacity:0; pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      white-space: normal;
      z-index: 2;
    }
    @media (prefers-color-scheme: dark) {
      .badge[data-tip]::after{ color:#eaeef3; background:#151515; border-color:rgba(255,255,255,.14) }
    }
    .badge[data-tip]:hover::after,
    .badge[data-tip]:focus-visible::after{
      opacity:1; transform: translate(-50%,-2px);
    }

    footer{text-align:center; margin-top:20px; font-size:12px; color:var(--muted)}
  </style>
</head>
<body>
  <!-- Canvas de partículas (líneas/nodos) -->
  <canvas id="bg-net" aria-hidden="true"></canvas>

  <main class="overlay">
    <h1>Luis Villarroel</h1>
    <p class="lead">Ingeniero en conectividad y redes · Visualiza en línea mis certificaciones y currículum o descárgalos. También puedes revisar mis insignias en Credly.</p>

    <!-- Botones principales: abren el visor para el PDF correspondiente -->
    <div class="btns">
      <!-- Certificaciones -->
      <a class="btn primary" id="btnCert" href="#" role="button">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M7 3h6l5 5v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" stroke="currentColor" stroke-width="1.6"/>
          <path d="M13 3v5h5" stroke="currentColor" stroke-width="1.6"/>
          <path d="M8 14h8M8 17h6" stroke="currentColor" stroke-width="1.6"/>
        </svg>
        Certificaciones (PDF)
      </a>

      <!-- Credly (externo) -->
      <a class="btn secondary" href="https://www.credly.com/users/luis-felipe-villarroel-olave" target="_blank" rel="noopener">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <circle cx="12" cy="8" r="5.2" stroke="currentColor" stroke-width="1.6"/>
          <path d="M8 14l-2.5 6L12 17l6.5 3L16 14" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
        </svg>
        Otros cursos (Credly)
      </a>

      <!-- Currículum -->
      <a class="btn secondary" id="btnCV" href="#" role="button">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 4h12v16H6z" stroke="currentColor" stroke-width="1.6"/>
          <path d="M9 8h6M9 12h6M9 16h3" stroke="currentColor" stroke-width="1.6"/>
        </svg>
        Currículum (PDF)
      </a>
    </div>

    <!-- VISOR DE PDF INCRUSTADO -->
    <section class="viewer" id="viewer" aria-live="polite" aria-label="Visor de documentos PDF">
      <div class="viewer-header">
        <div class="viewer-title" id="viewerTitle">Documento</div>
        <div class="viewer-actions">
          <!-- Abrir en pestaña nueva -->
          <a class="tiny-btn secondary" id="openTab" href="#" target="_blank" rel="noopener">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M14 3h7v7M10 14L21 3M5 7h6a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
            Abrir en pestaña
          </a>
          <!-- Descargar archivo -->
          <a class="tiny-btn" id="downloadBtn" href="#" download>
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v12m0 0l-4-4m4 4l4-4M5 21h14" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
            Descargar
          </a>
        </div>
      </div>
      <iframe id="pdfViewer" title="Visor PDF"></iframe>
    </section>

    <!-- Habilidades (chips con tooltips) -->
    <div class="badges" role="list" aria-label="Habilidades y Tecnologías">
      <button class="badge" role="listitem" data-tip="Diseño, implementación y troubleshooting de redes LAN/WAN y routing avanzado." aria-label="Redes: más información">
        <svg viewBox="0 0 24 24" fill="none"><path d="M12 3v6M12 15v6M5 9h14M5 15h14" stroke="currentColor" stroke-width="1.6"/></svg>
        Redes (Routing & Switching)
      </button>
      <button class="badge" role="listitem" data-tip="Hardening, gestión de firewalls, segmentación y políticas de acceso." aria-label="Seguridad: más información">
        <svg viewBox="0 0 24 24" fill="none"><path d="M12 3l7 3v5c0 5-3.5 9-7 10-3.5-1-7-5-7-10V6l7-3Z" stroke="currentColor" stroke-width="1.6"/></svg>
        Seguridad / Firewalls
      </button>
      <button class="badge" role="listitem" data-tip="Administración de servidores, bash scripting y automatización de tareas." aria-label="Linux: más información">
        <svg viewBox="0 0 24 24" fill="none"><path d="M8 20h8M9 4h6a3 3 0 0 1 3 3v7a6 6 0 0 1-6 6 6 6 0 0 1-6-6V7a3 3 0 0 1 3-3Z" stroke="currentColor" stroke-width="1.6"/></svg>
        Linux / Scripting
      </button>
      <button class="badge" role="listitem" data-tip="Planificación y despliegue de redes inalámbricas de alto rendimiento." aria-label="Wi-Fi: más información">
        <svg viewBox="0 0 24 24" fill="none"><path d="M2 8.5A16 16 0 0 1 22 8.5M5 12a11.5 11.5 0 0 1 14 0M8.5 15.5a7 7 0 0 1 7 0M12 20h0" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
        Soluciones Wi-Fi
      </button>
    </div>

    <footer>© <span id="year"></span> Luis Villarroel · Hecho con GitHub Pages.</footer>
  </main>

  <script>
    // Año dinámico
    document.getElementById('year').textContent = new Date().getFullYear();

    // Rutas de tus PDFs (codificadas donde corresponde)
    const CERT_URL = "CERTIFICADO%20%28M%C3%93DULO%29.pdf"; // en raíz del repo
    const CV_URL    = "Luis_Villarroel_CV.pdf";              // en raíz del repo

    // Elementos del visor
    const viewer      = document.getElementById('viewer');
    const pdfViewer   = document.getElementById('pdfViewer');
    const viewerTitle = document.getElementById('viewerTitle');
    const openTab     = document.getElementById('openTab');
    const downloadBtn = document.getElementById('downloadBtn');

    // Función para cargar un PDF en el visor
    function showPDF(src, title){
      pdfViewer.src = src;
      openTab.href   = src;
      downloadBtn.href = src;
      downloadBtn.setAttribute('download', title.replaceAll(' ','_') + ".pdf");
      viewerTitle.textContent = title;
      if (viewer.style.display !== 'block') viewer.style.display = 'block';
      viewer.scrollIntoView({behavior:'smooth', block:'start'});
    }

    // Botones principales -> ver online
    document.getElementById('btnCert').addEventListener('click', (e)=>{
      e.preventDefault();
      showPDF(CERT_URL, "Certificaciones");
    });
    document.getElementById('btnCV').addEventListener('click', (e)=>{
      e.preventDefault();
      showPDF(CV_URL, "Currículum");
    });

    // ======= Animación de fondo: red de partículas con líneas =======
    (function(){
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const canvas = document.getElementById('bg-net');
      const ctx = canvas.getContext('2d');
      let w, h, particles = [], rafId;

      function resize(){
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        // Re-crear partículas proporcional a tamaño de pantalla
        const count = Math.min(140, Math.max(40, Math.floor((w*h)/22000)));
        particles = createParticles(count);
      }

      function rnd(min, max){ return Math.random()*(max-min)+min; }

      function createParticles(n){
        const arr = [];
        for(let i=0;i<n;i++){
          arr.push({
            x: rnd(0, w),
            y: rnd(0, h),
            vx: rnd(-0.25, 0.25),
            vy: rnd(-0.25, 0.25),
            r: rnd(0.8, 1.8)
          });
        }
        return arr;
      }

      function step(){
        ctx.clearRect(0,0,w,h);
        // Colores adaptados al modo actual
        const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const ptColor = isDark ? 'rgba(255,255,255,0.8)' : 'rgba(0,0,0,0.65)';
        const lineColor = isDark ? 'rgba(255,255,255,0.18)' : 'rgba(0,0,0,0.14)';

        // Mover y pintar partículas
        for(const p of particles){
          p.x += p.vx; p.y += p.vy;
          if(p.x < 0 || p.x > w) p.vx *= -1;
          if(p.y < 0 || p.y > h) p.vy *= -1;

          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          ctx.fillStyle = ptColor;
          ctx.fill();
        }

        // Conectar líneas cercanas
        const maxDist = 110;
        ctx.strokeStyle = lineColor;
        for(let i=0;i<particles.length;i++){
          for(let j=i+1;j<particles.length;j++){
            const a = particles[i], b = particles[j];
            const dx = a.x - b.x, dy = a.y - b.y;
            const d2 = dx*dx + dy*dy;
            if(d2 < maxDist*maxDist){
              const alpha = 1 - (Math.sqrt(d2)/maxDist);
              ctx.globalAlpha = Math.max(0, Math.min(0.9, alpha*0.9));
              ctx.beginPath();
              ctx.moveTo(a.x, a.y);
              ctx.lineTo(b.x, b.y);
              ctx.stroke();
              ctx.globalAlpha = 1;
            }
          }
        }
        rafId = requestAnimationFrame(step);
      }

      function start(){
        resize();
        step();
      }

      function stop(){
        if(rafId) cancelAnimationFrame(rafId);
      }

      // Respetar preferencias de accesibilidad
      if(prefersReduced){
        // No animar: solo dibujar una malla muy tenue
        resize();
        ctx.clearRect(0,0,canvas.width,canvas.height);
        return;
      }

      window.addEventListener('resize', resize);
      start();
    })();
  </script>
</body>
</html>
